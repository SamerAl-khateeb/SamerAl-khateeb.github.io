 <?xml version = "1.0" encoding = "utf-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

 <!-- Exercise 12.7 -->
 <html xmlns = "http://www.w3.org/1999/xhtml">
 <head>
 <title>Exercise 12.7</title>
<style type = "text/css">
 span { font-size: 4em;
 font-weight: bold;
 font-family: helvetica, arial, sans-serif;
 color: red }
 table { border-collapse: collapse }
 td { border: 2px solid gray;
 width: 5em }
 </style>
 <script type = "text/javascript">
 <!--
 var cells;
 var swapped;

 function setup()
 {
 // create a 2d array of all the cells
 cells = new Array(
 [ document.getElementById( "cell00" ),
 document.getElementById( "cell01" ),
 document.getElementById( "cell02" ),
 document.getElementById( "cell03" ) ],
 [ document.getElementById( "cell10" ),
 document.getElementById( "cell11" ),
 document.getElementById( "cell12" ),
 document.getElementById( "cell13" ) ],
 [ document.getElementById( "cell20" ),
 document.getElementById( "cell21" ),
 document.getElementById( "cell22" ),
 document.getElementById( "cell23" ) ],
 [ document.getElementById( "cell30" ),
 document.getElementById( "cell31" ),
 document.getElementById( "cell32" ),
 document.getElementById( "cell33" ) ] );

 placeNumbers();
 }

 function placeNumbers()
 {
 var numbers = new Array();
 var randomLoc;
 var temp;

 for ( var i = 0; i < 16 ; i++ )
 numbers[ i ] = i;

 for ( i = 0; i < 16 ; i++ )
 {
 randomLoc = Math.floor( Math.random() * 15 + 1 );
 temp = numbers[ i ];
 numbers[ i ] = numbers[ randomLoc ];
 numbers[ randomLoc ] = temp;
 }

 i = 0;
 for ( var rows = 0; rows < 4; rows++ )
 for ( var cols = 0; cols< 4; cols++ )
 {if (numbers[ i ] != 0 )
 cells[ rows ][ cols ].innerHTML = numbers[ i ];
 else
 cells[ rows ][ cols ].innerHTML = "";

 ++i;
 }
 }

 function doClick( row, col )
 {
 var top = row - 1;
 var bottom = row + 1;
 var left = col - 1;
 var right = col + 1;

 swapped = false;

 if ( top != -1 && cells[ top ][ col ].innerHTML == "")
 swap( cells[ row ][ col ], cells[ top ][ col ] );
 else if ( right != 4 &&
 cells[ row ][ right ].innerHTML == "")
 swap( cells[ row ][ col ], cells[ row ][ right ] );
 else if ( bottom != 4 &&
 cells[ bottom ][ col ].innerHTML == "")
 swap( cells[ row ][ col ], cells[ bottom ][ col ] );
 else if ( left != -1 &&
 cells[ row ][ left ].innerHTML == "")
 swap( cells[ row ][ col ], cells[ row ][ left ] );
 else
 alert( "Illegal move." );
 }

 function swap( firstCell, secondCell )
 {
 swapped = true;
 secondCell.innerHTML = firstCell.innerHTML;
 firstCell.innerHTML = "";
 }
// -->
</script>
</head>
<body onload = "setup()">
<table>
<tr>
<td><span onclick = "doClick( 0, 0 )" id = "cell00" /></td>
<td><span onclick = "doClick( 0, 1 )" id = "cell01" /></td>
<td><span onclick = "doClick( 0, 2 )" id = "cell02" /></td>
<td><span onclick = "doClick( 0, 3 )" id = "cell03" /></td>
</tr>
<tr>
<td><span onclick = "doClick( 1, 0 )" id = "cell10" /></td>
<td><span onclick = "doClick( 1, 1 )" id = "cell11" /></td>
<td><span onclick = "doClick( 1, 2 )" id = "cell12" /></td>
<td><span onclick = "doClick( 1, 3 )" id = "cell13" /></td>
</tr>
<tr>
<td><span onclick = "doClick( 2, 0 )" id = "cell20" /></td>
<td><span onclick = "doClick( 2, 1 )" id = "cell21" /></td>
<td><span onclick = "doClick( 2, 2 )" id = "cell22" /></td>
<td><span onclick = "doClick( 2, 3 )" id = "cell23" /></td>
</tr>
<tr>
<td><span onclick = "doClick( 3, 0 )" id = "cell30" /></td>
<td><span onclick = "doClick( 3, 1 )" id = "cell31" /></td>
<td><span onclick = "doClick( 3, 2 )" id = "cell32" /></td>
<td><span onclick = "doClick( 3, 3 )" id = "cell33" /></td>
</tr>
</table>
</body>
</html>